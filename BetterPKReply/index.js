(function(s){"use strict";const{React:a,ReactNative:i}=vendetta.metro.common,{plugin:{storage:t},storage:{useProxy:o},ui:{components:{Forms:m}}}=vendetta,{FormRow:d,FormSection:h,FormSwitch:c}=m;function l(n){return o(t),a.createElement(i.ScrollView,{style:{flex:1}},[{label:"Fetch message (recommended)",default:!0,id:"fetch_msg"}].map(function(e){return e.id in t||(t[e.id]=e.default),a.createElement(d,{label:e.label,trailing:"id"in e?a.createElement(c,{value:t[e.id],onValueChange:function(f){return t[e.id]=f}}):void 0})}))}const u=vendetta.metro.findByStoreName("MessageStore");function r(n){if(message?.message_reference?.message_id||!message.embeds?.[0]?.description?.startsWith("**[Reply to:]("))return n;const e=message.embeds[0].description.match(/channels\/(\d+)\/(\d+)\/(\d+)/);return message.embeds.shift(),message.message_reference={guild_id:e[1],channel_id:e[2],message_id:e[3]},vendetta.plugin.storage.fetch_message===!0&&(message.referenced_message=u.getMessage(e[3])),n}var g={settings:l,onLoad:function(){this.onUnload=vendetta.patcher.before("dispatch",vendetta.metro.common.FluxDispatcher,function(n){let[e]=n;if(e.type==="LOAD_MESSAGES_SUCCES")return e.messages=e.messages.map(r),[e];if(e.type==="MESSAGE_CREATE")return e.message=r(e.message),[e]})}};return s.default=g,Object.defineProperty(s,"__esModule",{value:!0}),s})({});
