(function(s){"use strict";const{React:a,ReactNative:r}=vendetta.metro.common,{plugin:{storage:n},storage:{useProxy:o},ui:{components:{Forms:c}}}=vendetta,{FormRow:d,FormSection:h,FormSwitch:m}=c;function l(t){return o(n),a.createElement(r.ScrollView,{style:{flex:1}},[{label:"Fetch message (recommended)",default:!0,id:"fetch_msg"}].map(function(e){return e.id in n||(n[e.id]=e.default),a.createElement(d,{label:e.label,trailing:"id"in e?a.createElement(m,{value:n[e.id],onValueChange:function(f){return n[e.id]=f}}):void 0})}))}const u=vendetta.metro.findByStoreName("MessageStore");function i(t){if(t?.message_reference?.message_id||(t.id==="1099648298723332176"&&console.log(t),!t.embeds?.[0]?.description?.startsWith("**[Reply to:](")&&!t.embeds?.[0]?.description?.startsWith("*[(click to see attachment)[")))return t;const e=t.embeds[0].description.match(/channels\/(\d+)\/(\d+)\/(\d+)/);return t.embeds.shift(),t.message_reference={guild_id:e[1],channel_id:e[2],message_id:e[3]},vendetta.plugin.storage.fetch_message===!0&&(t.referenced_message=u.getMessage(e[3])),t}var g={settings:l,onLoad:function(){this.onUnload=vendetta.patcher.before("dispatch",vendetta.metro.common.FluxDispatcher,function(t){let[e]=t;if(e.type==="LOAD_MESSAGES_SUCCES")return e.messages=e.messages.map(i),[e];if(e.type==="MESSAGE_CREATE")return e.message=i(e.message),[e]})}};return s.default=g,Object.defineProperty(s,"__esModule",{value:!0}),s})({});
