(function(a){"use strict";const{React:s,ReactNative:i}=vendetta.metro.common,{plugin:{storage:l},storage:{useProxy:d},ui:{components:{Forms:c}}}=vendetta,{FormRow:m,FormSection:E,FormSwitch:u}=c;function f(t){return d(l),s.createElement(i.ScrollView,{style:{flex:1}},[{label:"Show the time of deletion",default:!1,id:"timestamps"},{label:"Keep your own messages",default:!0,id:"kys"}].map(function(e){return s.createElement(m,{label:e.label,trailing:s.createElement(u,{value:l[e.id]??e.default,onValueChange:function(n){return l[e.id]=n}})})}))}const r={settings:f},{plugin:{storage:g},patcher:{before:p}}=vendetta;let o=[];return r.onLoad=function(){return r.onUnload=p("dispatch",vendetta.metro.common.FluxDispatcher,function(t){const[e]=t;if(e.type==="MESSAGE_DELETE"){if(console.log("[Vendy]",e),o.includes(e.id))return delete o[o.indexOf(e.id)],t;let n="This message was deleted.";return n+=g.timestamps?` (${vendetta.metro.common.moment(new Date).toLocaleString()})`:"",console.log(n),o.push(e.id),t[0]={type:"MESSAGE_EDIT_FAILED_AUTOMOD",messageData:{type:1,message:{channelId:e.channelId,messageId:e.id}},errorResponseBody:{code:2e5,message:n}},t}})},a.default=r,Object.defineProperty(a,"__esModule",{value:!0}),a})({});
