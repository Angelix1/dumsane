(function(a){"use strict";const{React:i,ReactNative:l}=vendetta.metro.common,{plugin:{storage:s},storage:{useProxy:c},ui:{components:{Forms:m}}}=vendetta,{FormRow:u,FormSection:E,FormSwitch:f}=m;function g(t){return c(s),i.createElement(l.ScrollView,{style:{flex:1}},[{label:"Show the time of deletion",default:!1,id:"timestamps"},{label:"The plugin does not keep the messages you've deleted"}].map(function(e){return i.createElement(u,{label:e.label,trailing:"id"in e?i.createElement(f,{value:s[e.id]??e.default,onValueChange:function(o){return s[e.id]=o}}):void 0})}))}const r={settings:g},{plugin:{storage:p},patcher:{before:h}}=vendetta;let n=[];const d={};return r.onLoad=function(){return r.onUnload=h("dispatch",vendetta.metro.common.FluxDispatcher,function(t){const[e]=t;if(e.type==="MESSAGE_DELETE"){if(n.includes(e.id))return d[e.id]&&delete n[n.indexOf(e.id)],t;d[e.id]=!0;let o="This message was deleted.";return p.timestamps&&(o+=` (${vendetta.metro.common.moment(new Date).toLocaleString()})`),n.push(e.id),t[0]={type:"MESSAGE_EDIT_FAILED_AUTOMOD",messageData:{type:1,message:{channelId:e.channelId,messageId:e.id}},errorResponseBody:{code:2e5,message:o}},t}})},a.default=r,Object.defineProperty(a,"__esModule",{value:!0}),a})({});
