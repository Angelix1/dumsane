(function(s){"use strict";const{React:i,ReactNative:r}=vendetta.metro.common,{plugin:{storage:n},storage:{useProxy:d},ui:{components:{Forms:m}}}=vendetta;"timestamps"in n||(n.timestamps=!1);const{FormRow:c,FormSection:h,FormSwitch:u}=m;function g(t){return d(n),i.createElement(r.ScrollView,{style:{flex:1}},[{label:"Show the time of deletion",default:!1,id:"timestamps"},{label:"The plugin does not keep the messages you've deleted"}].map(function(e){return i.createElement(c,{label:e.label,trailing:"id"in e?i.createElement(u,{value:n[e.id]??e.default,onValueChange:function(a){return n[e.id]=a}}):void 0})}))}const l={settings:g},{plugin:{storage:p},patcher:{before:f}}=vendetta;let o=[];return l.onLoad=function(){return l.onUnload=f("dispatch",vendetta.metro.common.FluxDispatcher,function(t){const[e]=t;if(e.type==="MESSAGE_DELETE"){if(o.includes(e.id))return delete o[o.indexOf(e.id)],t;o.push(e.id);let a="This message was deleted.";return p.timestamps&&(a+=` (${vendetta.metro.common.moment(new Date).toLocaleString()})`),console.log("[NoDelete]",t[0]),t[0]={type:"MESSAGE_EDIT_FAILED_AUTOMOD",messageData:{type:1,message:{channelId:e.channelId,messageId:e.id}},errorResponseBody:{code:2e5,message:a}},console.log("[NoDelete]",t[0]),t}})},s.default=l,Object.defineProperty(s,"__esModule",{value:!0}),s})({});
